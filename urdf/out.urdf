<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from fisheye.urdf.xacro             | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="fisheye_box" xmlns:xacro="http://www.ros.org/wiki/xacro">
    <!--  model -->
    <link name="world"/>
    <joint name="box_mount" type="fixed">
        <origin xyz="0 0 0.25"/>
        <parent link="world"/>
        <child link="box"/>
    </joint>
    <link name="box">
        <inertial>
            <mass value="0.001"/>
            <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
        </inertial>
        <visual>
            <geometry>
                <box size="0.1 0.1 0.5"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <box size="0.1 0.1 0.5"/>
            </geometry>
        </collision>
    </link>
    <!-- Camera -->
    <joint name="fisheye_mount" type="fixed">
        <origin rpy="0 0 3.14159265359" xyz="0.0 0.0 0.0"/>
        <parent link="box"/>
        <child link="fisheye_camera"/>
    </joint>
    <link name="fisheye_camera">
        <visual>
            <geometry>
                <mesh filename="package://ocam-calibration/meshes/camera.dae" scale="0.7 0.7 0.7"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <box size="0.001 0.001 0.001"/>
            </geometry>
        </collision>
    </link>
    <joint name="fisheye_optical_mount" type="fixed">
        <origin rpy="-1.57079632679 0 -1.57079632679" xyz="0 0 0"/>
        <parent link="fisheye_camera"/>
        <child link="fisheye_optical"/>
    </joint>
    <link name="fisheye_optical"/>
    <gazebo reference="fisheye_camera">
        <sensor name="fisheye" type="wideanglecamera">
            <update_rate>25</update_rate>
            <always_on>true</always_on>
            <camera>
                <horizontal_fov>3.22885911619</horizontal_fov>
                <image>
                    <width>754</width>
                    <height>480</height>
                </image>
                <clip>
                    <near>0.1</near>
                    <far>100</far>
                </clip>
                <lens>
                    <type>orthographic</type>
                    <!-- if it is set to `true` your horizontal FOV will remain as defined -->
                    <!-- otherwise it depends on lens type and custom function, if there is one -->
                    <scale_to_hfov>false</scale_to_hfov>
                    <!-- clip everything that is outside of this angle -->
                    <!--<cutoff_angle>${pi/2]</cutoff_angle>-->
                    <!-- resolution of the cube-map texture, the higher it is - the sharper is your image -->
                    <env_texture_size>4096</env_texture_size>
                </lens>
            </camera>
            <plugin filename="libgazebo_ros_camera.so" name="fisheye_controller">
                <alwaysOn>true</alwaysOn>
                <updateRate>0</updateRate>
                <cameraName>fisheye</cameraName>
                <imageTopicName>image_raw</imageTopicName>
                <cameraInfoTopicName>camera_info</cameraInfoTopicName>
                <frameName>fisheye_optical</frameName>
            </plugin>
        </sensor>
    </gazebo>
    <gazebo>
        <static>true</static>
        <shadows>false</shadows>
    </gazebo>
    <gazebo reference="box">
        <gravity>false</gravity>
        <material>Gazebo/DarkGray</material>
    </gazebo>
</robot>

